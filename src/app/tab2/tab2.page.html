<ion-content [fullscreen]="true">

  <div class="bg-white pr-1 pl-1">
    <p class="font-bold text-2xl mt-2 p-4 ml-2 text-center">Menu</p>
    <p class="font-black text-2xl ml-4 mb-4 text-green-800 text-start"
    *ngIf="userData?.Nombre">Descubre <span class="text-orange-600">nuestros</span> sabores {{ userData.Nombre }}</p>
 

    <div class="ml-4 flex items-center justify-between mb-4">
      <div class="flex-1">
        <input type="text" [(ngModel)]="searchTerm" (input)="filtrarProductos()" placeholder="Buscar producto"
        class="w-full p-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-500" />
      </div>
      <ion-button class="btn-primary  text-white font-bold h-12 px-2 rounded ">
        <ion-icon class="h-12 w-7" name="options-outline"></ion-icon>
      </ion-button>
    </div>

    <div class="ml-4 mb-4">
      <label for="priceRange" class="text-gray-600 font-semibold">Precio máximo: ${{ maxPrice }}</label>
      <input type="range" id="priceRange" min="0" max="1000" [(ngModel)]="maxPrice" (input)="filtrarProductos()" 
        class="w-full mt-2"/>
    </div>
    
    <div class="ml-4 flex space-x-3 overflow-x-auto ">
      <button class="bg-yellow-400 text-white font-semibold px-4 py-2 rounded-full">
        <div class="flex items-center">
          <ion-icon name="pizza-outline" class="h-5 w-5 mr-2"></ion-icon>
          Fast Food
        </div>
      </button>
      <button class="bg-gray-100 text-gray-700 font-semibold px-4 py-2 rounded-full">
        Fruits
      </button>
      <button class="bg-gray-100 text-gray-700 font-semibold px-4 py-2 rounded-full">
        Drinks
      </button>
      <!-- Más categorías -->
    </div>

    <div class="mx-auto max-w-3xl px-4 py-10   lg:max-w-7xl lg:px-8">

      <div class=" grid grid-cols-2 gap-x-3 gap-y-10 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8">

        <div *ngFor="let product of products" class="rounded-[17px] border border-1 border-gray-200 shadow-sm ">
          <div class="aspect-h-1 aspect-w-1 pr-4 pt-2  pl-4 overflow-hidden rounded-[20px]  lg:aspect-none group-hover:opacity-75 lg:h-25" (click)="obtenerDetalleProducto(product.idProducto)">
            <img [src]="product.Imagen" alt="Front of men&#039;s Basic Tee in black."
              class="h-30 w-50  rounded-[20px] object-cover object-center ">
          </div>
          <div class="p-2">
            <h2 class="text-lg font-bold truncate"> {{product.Nombre}}</h2>
            <p class="text-sm text-gray-500">Fresh Tomato</p>
            <div class="flex justify-between items-center mt-2">
              <span class="font-bold">${{product.Precio}}</span>
              <div class="flex items-center space-x-1"> <!-- Ajusta el valor de `space-x-1` según la separación deseada -->
                <ion-button id="open-product-modal" name="open-product-modal" expand="block" size="small" color="success" class="z-10" (click)="obtenerDetalleProducto(product.idProducto)">
                  <ion-icon slot="icon-only" name="eye" size="medium" color="light"></ion-icon>
                </ion-button>
                
                <div *ngIf="userData.idUsuario !== 0">
                  <ion-button expand="block" size="small" color="success" class="z-10" (click)="agregarAlCarrito(product.idProducto)">
                    <ion-icon slot="icon-only" name="cart" size="medium" color="light"></ion-icon>
                  </ion-button>
                </div>
              </div>
              
            </div>
          </div>
        </div>

      </div>


      <div #productPage>
        <ion-modal #productModal [canDismiss]="canDismiss" [presentingElement]="productPage">
          <ng-template>
            <ion-content>
              <div *ngIf="productoSelect !== null" class="m-4">
                <div class="p-5">
                  <div class="flex justify-end">
                    <ion-buttons slot="end">
                      <ion-button (click)="productModal.dismiss()">
                        <ion-icon name="close-outline" class="h-10 w-10"></ion-icon>
                      </ion-button>
                    </ion-buttons>
                  </div>
                  <div class="mb-2">
                    <img [src]="productoSelect.Imagen" alt="Producto" class="h-1/2 w-full">
                  </div>
                </div>
                <div class="flex mt-2 pr-4 pl-4 ml-3 items-center">
                  <div class="flex items-center mr-4">
                    <ion-icon name="alarm-outline" class="h-7 w-7 mr-2"></ion-icon>
                    <span>40 minutos</span>
                  </div>
                  <div class="flex items-center">
                    <ion-icon name="fast-food-outline" class="h-7 w-7 mr-2"></ion-icon>
                    <span>Platillo fuerte</span>
                  </div>
                </div>
                <div class="ml-3 p-5">
                  <div class="flex justify-between items-center">
                    <p class="font-bold text-start text-2xl mt-4">{{ productoSelect.Nombre }}</p>
                    <p class="font-bold text-end text-3xl text-red-700">${{ productoSelect.Precio }}</p>
                  </div>
                  <p class="font-normal text-start text-md mt-4">{{ productoSelect.Descripcion }}</p>
                  <p class="font-normal text-start text-md mt-4">{{ productoSelect.Ingredientes }}</p>

                <ion-button shape="round" color="success" class="absolute top-4 right-4">
                  <ion-icon slot="icon-only" name="heart" class="text-white"></ion-icon>
                </ion-button>

                <div class="w-[220px] h-[220px] overflow-hidden rounded-full mt-[39px] shadow-bottom">          
                  <img [src]="productoSelect?.Imagen" alt="Platillo" class=" w-full h-full object-cover">
                </div>
              </div>
              <!-- Contenido principal con borde redondeado en la parte superior -->
              <div class="p-10  pt-[10vh] bg-white rounded-t-[90px] -mt-20 z-20 relative">
                
                <!-- Título del platillo y calificación -->
                <div class="flex justify-between items-center ">
                  <div class="">
                    <p class="text-xl font-bold">{{ productoSelect?.Nombre }}</p>
                      <p class="text-sm text-gray-600 mt-2">Western</p>
                  </div>
                  <span class="ml-2 font-bold text-2xl text-green-400">${{ productoSelect?.Precio }}</span>
                </div>

                <div class="flex justify-between mt-4">
                  <div class="flex space-x-4 mr-2">
                    <div class="text-center">
                      <ion-icon name="time-outline" class="text-green-500 text-2xl"></ion-icon>
                      <p class="text-gray-800 mt-1">35 min</p>
                    </div>
                    <div class="text-center">
                      <ion-icon name="people-outline" class="text-green-500 text-2xl"></ion-icon>
                      <p class="text-gray-800 mt-1">1 porción</p>
                    </div>
                  </div>
                  <div class="flex items-center space-x-1">
                    <span class="text-xl">4.5</span>
                    <ion-icon name="star" class="w-6 h-6 text-yellow-600"></ion-icon>
                  </div>
                </div>
                

      
                <div class="mt-4">
                  <h4 class="text-lg font-bold text-gray-800">Detalles</h4>
                  <p class="text-md text-gray-600">{{ productoSelect.Descripcion }}</p>
                </div>
      
                <!-- Lista de ingredientes -->
                <div class="mt-4">
                  <h3 class="font-bold text-xl text-gray-800">Ingredientes</h3>
                  <ul class="list-disc list-inside text-gray-700 mt-2 ml-5">
                    <li *ngFor="let ingrediente of (productoSelect?.Ingredientes || '').split(',')">
                      {{ ingrediente.trim() }}
                    </li>
                  </ul>
                </div>
      
                <!-- Botones para agregar y controlar la cantidad -->
                <div class="flex justify-between items-center mt-6">
                  <div class="flex items-center">
                    <ion-icon name="add-circle-outline" class="text-black text-3xl"></ion-icon>
                    <span class="font-bold text-2xl mx-4">2</span>
                    <ion-icon name="remove-circle-outline" class="text-black text-3xl"></ion-icon>
                  </div>
                  <ion-button (click)="agregarAlCarrito(productoSelect.idProducto)" class="ml-2 btn-primary text-white w-full font-bold text-[12px]">
                   Agregar al carrito
                  </ion-button>
                </div>
              </div>
            </ion-content>
          </ng-template>
        </ion-modal>
      </div>

      
      

    </div>
  </div>

</ion-content>

<style>
 .shadow-bottom::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 80%;
  height: 20%;
  background: radial-gradient(circle, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0));
  border-radius: 50%;
  z-index: -1;
}


</style>